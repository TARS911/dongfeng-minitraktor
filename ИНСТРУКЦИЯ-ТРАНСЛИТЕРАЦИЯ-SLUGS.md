# üìã –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –¢–†–ê–ù–°–õ–ò–¢–ï–†–ê–¶–ò–ò SLUG'–û–í

## üéØ –¶–µ–ª—å

–ò—Å–ø—Ä–∞–≤–∏—Ç—å **–í–°–ï** slug —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π –Ω–∞ –ª–∞—Ç–∏–Ω–∏—Ü—É (—Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è).

–≠—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤, –≤–∫–ª—é—á–∞—è:
- 1,350 —Ç–æ–≤–∞—Ä–æ–≤ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ (–Ω–æ —Ä–∞–∑–Ω—ã–º–∏ —Ü–µ–Ω–∞–º–∏)
- –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã —Å –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏ –≤ slug

---

## ‚öôÔ∏è –°–ü–û–°–û–ë 1: SQL –°–ö–†–ò–ü–¢ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø) ‚ö°

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ **–ë—ã—Å—Ç—Ä–æ** - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é —Å –ë–î
- ‚úÖ **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ** - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º

### –®–∞–≥–∏:

#### 1. –û—Ç–∫—Ä—ã—Ç—å SQL Editor –≤ Supabase
https://supabase.com/dashboard/project/dpsykseeqloturowdyzf/sql

#### 2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `FIX-CYRILLIC-SLUGS.sql`

#### 3. –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ —à–∞–≥–∞–º:

**–®–ê–ì 1: –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏**

```sql
CREATE OR REPLACE FUNCTION transliterate_slug(slug_text text) RETURNS text AS $$
DECLARE
    result text;
BEGIN
    result := slug_text;

    -- –ó–∞–º–µ–Ω—è–µ–º –¥–≤—É—Ö–±—É–∫–≤–µ–Ω–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
    result := replace(result, '—ë', 'yo');
    result := replace(result, '–∂', 'zh');
    result := replace(result, '–π', 'y');
    result := replace(result, '—Ü', 'ts');
    result := replace(result, '—á', 'ch');
    result := replace(result, '—à', 'sh');
    result := replace(result, '—â', 'sch');
    result := replace(result, '—é', 'yu');
    result := replace(result, '—è', 'ya');

    result := replace(result, '–Å', 'Yo');
    result := replace(result, '–ñ', 'Zh');
    result := replace(result, '–ô', 'Y');
    result := replace(result, '–¶', 'Ts');
    result := replace(result, '–ß', 'Ch');
    result := replace(result, '–®', 'Sh');
    result := replace(result, '–©', 'Sch');
    result := replace(result, '–Æ', 'Yu');
    result := replace(result, '–Ø', 'Ya');

    -- –ó–∞–º–µ–Ω—è–µ–º –æ–¥–Ω–æ–±—É–∫–≤–µ–Ω–Ω—ã–µ
    result := translate(result,
        '–∞–±–≤–≥–¥–µ–∑–∏–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—ã—ç—ä—å–ê–ë–í–ì–î–ï–ó–ò–ö–õ–ú–ù–û–ü–†–°–¢–£–§–•–´–≠–™–¨',
        'abvgdeziklmnoprstufhyeABVGDEZIKLMNOPRSTUFHYE'
    );

    -- –ü—Ä–∏–≤–æ–¥–∏–º –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É
    result := lower(result);

    -- –£–±–∏—Ä–∞–µ–º –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–µ—Ñ–∏—Å—ã
    result := regexp_replace(result, '-+', '-', 'g');

    -- –£–±–∏—Ä–∞–µ–º –¥–µ—Ñ–∏—Å—ã –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ
    result := trim(both '-' from result);

    RETURN result;
END;
$$ LANGUAGE plpgsql IMMUTABLE;
```

**–®–ê–ì 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ (–ù–ï –∏–∑–º–µ–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ)**

```sql
-- –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π
SELECT
    '–¢–æ–≤–∞—Ä–æ–≤ —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π –≤ slug' as metric,
    COUNT(*) as count
FROM products
WHERE slug ~ '[–∞-—è–ê-–Ø—ë–Å]';

-- –ü—Ä–∏–º–µ—Ä—ã slug, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
SELECT
    id,
    name,
    slug as old_slug,
    transliterate_slug(slug) as new_slug
FROM products
WHERE slug ~ '[–∞-—è–ê-–Ø—ë–Å]'
ORDER BY id
LIMIT 20;
```

**–®–ê–ì 3: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏**

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï!** –≠—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –∏–∑–º–µ–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ!

```sql
UPDATE products
SET
    slug = transliterate_slug(slug),
    updated_at = NOW()
WHERE slug ~ '[–∞-—è–ê-–Ø—ë–Å]';
```

**–®–ê–ì 4: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**

```sql
-- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ—Å—Ç–∞–ª–∏—Å—å –ª–∏ —Ç–æ–≤–∞—Ä—ã —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π
SELECT
    '–¢–æ–≤–∞—Ä–æ–≤ —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è' as metric,
    COUNT(*) as count
FROM products
WHERE slug ~ '[–∞-—è–ê-–Ø—ë–Å]';

-- –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ slug (–ø–µ—Ä–≤—ã–µ 20)
SELECT
    id,
    name,
    slug
FROM products
WHERE updated_at > NOW() - INTERVAL '5 minutes'
ORDER BY id
LIMIT 20;
```

---

## ‚öôÔ∏è –°–ü–û–°–û–ë 2: PYTHON –°–ö–†–ò–ü–¢ (–ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê)

–ï—Å–ª–∏ SQL —Å–∫—Ä–∏–ø—Ç –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Python —Å–∫—Ä–∏–ø—Ç:

```bash
python3 scripts/fix-cyrillic-slugs.py
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Python —Å–∫—Ä–∏–ø—Ç –º–µ–¥–ª–µ–Ω–Ω–µ–µ (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã –ø–æ –æ–¥–Ω–æ–º—É —á–µ—Ä–µ–∑ API).

---

## üîç –ü–†–ò–ú–ï–†–´ –¢–†–ê–ù–°–õ–ò–¢–ï–†–ê–¶–ò–ò

```
–°—Ç–∞—Ä—ã–π slug ‚Üí –ù–æ–≤—ã–π slug
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ ‚Üí neizvestno
–∑–∞–ø—á–∞—Å—Ç–∏-dongfeng ‚Üí zapchasti-dongfeng
–Ω–∞—Å–æ—Å-–º–∞—Å–ª—è–Ω—ã–π ‚Üí nasos-maslyanyy
—Ñ–∏–ª—å—Ç—Ä-—Ç–æ–ø–ª–∏–≤–Ω—ã–π ‚Üí filtr-toplivnyy
–¥–≤–∏–≥–∞—Ç–µ–ª—å-–¥–∏–∑–µ–ª—å ‚Üí dvigatel-dizel
```

---

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

- [x] –í—Å–µ slug —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ –ª–∞—Ç–∏–Ω–∏—Ü—É
- [x] –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–µ—Ñ–∏—Å—ã —É–±—Ä–∞–Ω—ã
- [x] –î–µ—Ñ–∏—Å—ã –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ —É–±—Ä–∞–Ω—ã
- [x] –í—Å–µ slug –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ
- [x] –¢–æ–≤–∞—Ä–æ–≤ —Å –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏–º–∏ slug: **0**

---

## üìä –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

**–î–æ:**
- –¢–æ–≤–∞—Ä–æ–≤ —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π: ~1,000+ (—Ç–æ—á–Ω–æ–µ —á–∏—Å–ª–æ –ø–æ–∫–∞–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞)

**–ü–æ—Å–ª–µ:**
- –¢–æ–≤–∞—Ä–æ–≤ —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π: **0**
- –í—Å–µ slug –Ω–∞ –ª–∞—Ç–∏–Ω–∏—Ü–µ

---

## üÜò –í –°–õ–£–ß–ê–ï –ü–†–û–ë–õ–ï–ú

1. **–§—É–Ω–∫—Ü–∏—è –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ Supabase
2. **UPDATE –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ RLS (Row Level Security) –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. **Slug –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å slug –ø–æ—Å–ª–µ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-27
**–ê–≤—Ç–æ—Ä:** Claude Code
