# üì¶ Scripts Documentation

## Product Enrichment Scripts

### üéØ Main Scripts

#### `enrich-products-metadata.py`
**–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –æ–±–æ–≥–∞—â–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤**

```bash
cd scripts && python3 enrich-products-metadata.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç 23 JSON —Ñ–∞–π–ª–∞ –∏–∑ `parsed_data/`
- –ß–∏—Ç–∞–µ—Ç –±—Ä–µ–Ω–¥ –∏–∑ –ø–æ–ª—è `brand` –≤ JSON
- –û–±–Ω–æ–≤–ª—è–µ—Ç `manufacturer`, `model`, `specifications`
- –î–æ–±–∞–≤–ª—è–µ—Ç `part_type`, `engine_model`, `category`

**–§–∞–π–ª—ã:**
- 19 —Ñ–∞–π–ª–æ–≤ ZIP-AGRO (—Ñ–∏–ª—å—Ç—Ä—ã, —Ç–æ–ø–ª–∏–≤–Ω–∞—è, –¥–≤–∏–≥–∞—Ç–µ–ª–∏, –º–∏–Ω–∏—Ç—Ä–∞–∫—Ç–æ—Ä—ã)
- 11 —Ñ–∞–π–ª–æ–≤ TATA-AGRO (–∑–∞–ø—á–∞—Å—Ç–∏, –¥–≤–∏–≥–∞—Ç–µ–ª–∏, —Å–∞–¥–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞)

---

#### `detect-brands-from-names.py`
**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±—Ä–µ–Ω–¥–æ–≤ –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤**

```bash
cd scripts && python3 detect-brands-from-names.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö –∑–∞–ø—á–∞—Å—Ç–µ–π
- –ò—â–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã –±—Ä–µ–Ω–¥–æ–≤: DongFeng, Foton, Jinma, Xingtai, ZUBR
- –û–±–Ω–æ–≤–ª—è–µ—Ç `manufacturer` –¥–ª—è –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û–±–Ω–æ–≤–ª–µ–Ω–æ 71 —Ç–æ–≤–∞—Ä –∏–∑ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö –∑–∞–ø—á–∞—Å—Ç–µ–π
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –±—Ä–µ–Ω–¥—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤, —Ç–æ–ø–ª–∏–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã, –Ω–∞—Å–æ—Å–æ–≤

---

#### `quick-enrich.py`
**–ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–∞–ª—ã—Ö –≤—ã–±–æ—Ä–∫–∞—Ö**

```bash
cd scripts && python3 quick-enrich.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç 100 —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞
- –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –æ–±–æ–≥–∞—â–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

#### `check-distribution.py`
**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤**

```bash
cd scripts && python3 check-distribution.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –ë–î
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –±—Ä–µ–Ω–¥–∞–º
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ç–∏–ø–∞–º –∑–∞–ø—á–∞—Å—Ç–µ–π

---

### üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π

#### üîß –ó–∞–ø—á–∞—Å—Ç–∏ –¥–ª—è –¥–≤–∏–≥–∞—Ç–µ–ª–µ–π (parts-engines)
- **R180** - zip-agro-r180ne-parts.json
- **R190** - zip-agro-r190ne-parts.json
- **R195** - zip-agro-r195ne-parts.json
- **ZS1100/ZS1115** - zip-agro-zs1100-1115-parts.json
- **KM385/LL380** - zip-agro-km385-ll380-parts.json
- **ZN490** - zip-agro-zn490bt-parts.json

#### üöú –ó–∞–ø—á–∞—Å—Ç–∏ –¥–ª—è –º–∏–Ω–∏—Ç—Ä–∞–∫—Ç–æ—Ä–æ–≤

**DongFeng** (parts-minitractors-dongfeng):
- –û–±—â–∏–µ –∑–∞–ø—á–∞—Å—Ç–∏
- DF-240/DF-244
- DF-354/DF-404

**Foton** (parts-minitractors-foton):
- –í—Å–µ –º–æ–¥–µ–ª–∏

**Jinma** (parts-minitractors-jinma):
- –í—Å–µ –º–æ–¥–µ–ª–∏

**Xingtai** (parts-minitractors-xingtai):
- –û–±—â–∏–µ –∑–∞–ø—á–∞—Å—Ç–∏
- XT-120
- XT-180
- XT-24B

#### üî© –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∑–∞–ø—á–∞—Å—Ç–∏
- **–§–∏–ª—å—Ç—Ä—ã** (parts-filters)
- **–¢–æ–ø–ª–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** (parts-fuel-system)
- **–ì–∏–¥—Ä–∞–≤–ª–∏–∫–∞** (parts-hydraulics)
- **–ö–ü–ü** (parts-transmission)

#### üõµ –î—Ä—É–≥–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- **–ú–æ—Ç–æ—Ç—Ä–∞–∫—Ç–æ—Ä—ã** (parts-mototractors) - –ó—É–±—Ä 16
- **–°–∞–¥–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞** (parts-attachments)

---

### üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ë–î

**–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –±—Ä–µ–Ω–¥–∞–º:**
- UNIVERSAL: 6,097 (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∑–∞–ø—á–∞—Å—Ç–∏: –±–æ–ª—Ç—ã, –ø–∞–ª—å—Ü—ã, –Ω–∞–≤–µ—Å–Ω–æ–µ)
- DongFeng: 727
- XINGTAI: 1,092
- JINMA: 1,052
- Foton: 289
- ZUBR: 122

**–û–±–Ω–æ–≤–ª–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤:**
- ~200+ —Ç–æ–≤–∞—Ä–æ–≤ –æ–±–æ–≥–∞—â–µ–Ω–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- 71 —Ç–æ–≤–∞—Ä - –±—Ä–µ–Ω–¥—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏–π

---

### ‚öôÔ∏è Database Indexes

–ü—Ä–∏–º–µ–Ω–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

```sql
-- –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
idx_products_manufacturer
idx_products_in_stock
idx_products_price
idx_products_category

-- –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ (—Ä—É—Å—Å–∫–∏–π)
idx_products_name_search (GIN)

-- –ö–æ–º–ø–æ–∑–∏—Ç–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
idx_products_brand_stock
idx_products_cat_brand_stock
```

---

### üöÄ Next Steps

1. **–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±–æ–≥–∞—â–µ–Ω–∏–µ** –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Ç–æ–≤–∞—Ä–æ–≤
2. **UNIVERSAL —Ç–æ–≤–∞—Ä—ã** - –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å (—ç—Ç–æ –≤–∞–ª–∏–¥–Ω–æ –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö –∑–∞–ø—á–∞—Å—Ç–µ–π)
3. **–î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ** –ø–æ `specifications.part_type`, `engine_model`
4. **–°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π** –¥–ª—è parts-engines, parts-minitractors –∏ —Ç.–¥.

---

### üìù Notes

- –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: `SUPABASE_URL`, `SUPABASE_SERVICE_ROLE_KEY`
- –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å retry –ª–æ–≥–∏–∫–æ–π (3 –ø–æ–ø—ã—Ç–∫–∏)
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–∞—É–∑—ã –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è rate limits
- –ë—Ä–µ–Ω–¥—ã —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ JSON —Ñ–∞–π–ª–æ–≤, –ù–ï —Ö–∞—Ä–¥–∫–æ–¥—è—Ç—Å—è
