-- ===================================================================
-- БЫСТРОЕ УДАЛЕНИЕ ВСЕХ ТОВАРОВ ИЗ КАТЕГОРИИ "ЗАПЧАСТИ"
-- Выполнить в Supabase SQL Editor
-- ===================================================================

-- ШАГ 1: Удаляем ВСЕ товары из подкатегорий запчастей (ID > 7)
DELETE FROM products
WHERE category_id IN (
    SELECT id FROM categories
    WHERE id > 7  -- Все подкатегории запчастей имеют ID > 7
);

-- ШАГ 2: Удаляем товары из главной категории "Запчасти" (ID = 2)
DELETE FROM products
WHERE category_id = 2;

-- ШАГ 3: Удаляем все подкатегории запчастей (оставляем только главную)
DELETE FROM categories
WHERE id > 7;  -- Удаляем все подкатегории, оставляя только основные (ID 1-7)

-- ШАГ 4: Обновляем описание категории "Запчасти"
UPDATE categories
SET description = 'Запчасти для минитракторов'
WHERE id = 2;

-- ===================================================================
-- ПРОВЕРКА РЕЗУЛЬТАТА
-- ===================================================================

-- Проверяем категорию "Запчасти"
SELECT id, name, slug, description
FROM categories
WHERE id = 2;

-- Проверяем количество товаров в категории "Запчасти"
SELECT COUNT(*) as products_count
FROM products
WHERE category_id = 2;

-- Проверяем общее количество категорий (должно быть ~7)
SELECT COUNT(*) as total_categories
FROM categories;

-- Проверяем общее количество товаров
SELECT COUNT(*) as total_products
FROM products;

-- ===================================================================
-- ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:
-- - Категория "Запчасти" (ID=2) существует
-- - В категории "Запчасти" 0 товаров
-- - Осталось ~7 основных категорий (мини-тракторы, техника, бренды)
-- - Общее количество товаров уменьшилось
-- ===================================================================
