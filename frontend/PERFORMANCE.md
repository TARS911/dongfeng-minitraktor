# Оптимизация производительности Next.js

## Проблемы и решения

### 1. Медленная первая загрузка (7-9 секунд)
**Это нормально для dev режима!** Next.js компилирует страницы при первом запросе.

**В production будет быстрее:**
```bash
npm run build
npm start
```

### 2. Множественные запросы к Supabase
**Исправлено:** Добавлено кэширование запросов в `app/lib/supabase-server.ts`

- Категории кэшируются на 1 час
- Товары кэшируются на 10 минут
- Это уменьшает нагрузку на базу данных

### 3. Ошибки с params в Next.js 15
**Исправлено:** Добавлен `await params` в динамических роутах

### 4. Как ускорить разработку

1. **После первой загрузки страницы работают быстро** (300-2000ms)
2. **Hot Module Replacement (HMR)** обновляет изменения без перезагрузки
3. **Production build** в 3-5 раз быстрее dev режима

### 5. Проверка скорости в браузере

Откройте DevTools → Network:
- Первый запрос: медленный (компиляция)
- Повторные запросы: быстрые (из кэша)

### 6. Рекомендации

**Для разработки:**
- Работайте на одной странице
- Перезагружайте сервер только при необходимости
- Используйте HMR для CSS/компонентов

**Для production:**
```bash
npm run build  # Сборка оптимизированной версии
npm start      # Запуск production сервера
```

**Для Netlify:**
- Автоматическая оптимизация
- CDN кэширование статики
- Serverless функции для SSR
