<!doctype html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Сравнение товаров - DONGFENG Минитрактора</title>
        <meta name="description" content="Сравнение минитракторов DONGFENG" />

        <link rel="stylesheet" href="css/variables.css?v=1761211422" />
        <link rel="stylesheet" href="css/reset.css?v=1761211422" />
        <link rel="stylesheet" href="css/components.css?v=1761211422" />
        <link rel="stylesheet" href="css/effects.css?v=1761211422" />
        <link rel="stylesheet" href="css/main.css?v=1761211422" />
        <link rel="stylesheet" href="css/modal.css?v=1761211422" />
        <link rel="stylesheet" href="css/header-new.css?v=1761211422" />
        <link rel="stylesheet" href="css/modern-header.css?v=1761991144" />
        <link rel="stylesheet" href="css/promo-blocks.css?v=1761211422" />
        <link rel="stylesheet" href="css/mobile-menu.css?v=1761211422" />
        <link rel="stylesheet" href="css/cart-buttons-fix.css?v=1761995152" />
        <link rel="stylesheet" href="css/vertical-menu.css" />
        <link rel="stylesheet" href="css/mobile-improvements.css" />
        <link rel="stylesheet" href="css/catalog-modals.css?v=1761211422" />
        <link rel="stylesheet" href="css/cart.css?v=1761211422" />
        <link rel="stylesheet" href="css/cart-header-mobile.css?v=1761211422" />
        <link rel="stylesheet" href="css/footer-minimal.css?v=1761211422" />
        <style>
            .compare-table-wrapper {
                overflow-x: auto;
                margin-top: 40px;
                background: white;
                border-radius: 12px;
                padding: 20px;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            }
            .compare-table {
                width: 100%;
                border-collapse: collapse;
                min-width: 600px;
            }
            .compare-table th,
            .compare-table td {
                padding: 16px;
                text-align: center;
                border: 1px solid #e8e8e8;
            }
            .compare-table th {
                background: #f5f5f5;
                font-weight: 600;
                color: #404040;
                text-align: left;
            }
            .compare-table td {
                font-size: 16px;
                color: #525252;
            }
            .compare-table img {
                width: 120px;
                height: 120px;
                object-fit: cover;
                border-radius: 8px;
                margin: 0 auto;
                display: block;
            }
            .compare-table strong {
                color: #171717;
                font-weight: 600;
            }
            .compare-remove-btn {
                background: #fee;
                color: #ef4444;
                border: none;
                padding: 8px 16px;
                border-radius: 6px;
                cursor: pointer;
                font-size: 14px;
                font-weight: 500;
                transition: all 0.2s;
            }
            .compare-remove-btn:hover {
                background: #ef4444;
                color: white;
            }
        </style>
    </head>
    <body class="with-sidebar">
        <!-- Кнопка переключения sidebar (для мобильных) - СПРАВА ВВЕРХУ -->
        <button
            class="sidebar-toggle"
            onclick="toggleSidebar()"
            aria-label="Меню"
        >
            <svg
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
            >
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
        </button>

        <!-- Overlay для мобильных устройств -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <!-- Вертикальное боковое меню -->
        <aside class="sidebar-menu" id="sidebarMenu">
            <!-- Заголовок с логотипом и кнопкой закрытия -->
            <div class="sidebar-menu__header">
                <div class="sidebar-menu__logo-container">
                    <a href="index.html" class="sidebar-menu__logo">
                        <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="currentColor"
                        >
                            <path
                                d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5zm0 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"
                            />
                        </svg>
                        DONGFENG
                    </a>
                </div>
                <button
                    class="sidebar-menu__close"
                    onclick="closeSidebar()"
                    aria-label="Закрыть"
                >
                    ×
                </button>
            </div>

            <!-- Кнопка скрытия/показа sidebar (только десктоп) -->
            <div class="sidebar-collapse-toggle">
                <button
                    class="sidebar-desktop-toggle"
                    onclick="toggleSidebarDesktop()"
                    title="Свернуть/развернуть меню"
                >
                    <svg
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    >
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
            </div>

            <!-- Навигация -->
            <nav class="sidebar-menu__nav">
                <ul class="sidebar-menu__list">
                    <!-- Кнопка каталога -->
                    <li class="sidebar-menu__item">
                        <a
                            href="catalog.html"
                            class="sidebar-menu__link sidebar-menu__link--catalog"
                        >
                            <svg
                                width="20"
                                height="20"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                            >
                                <rect x="3" y="3" width="7" height="7"></rect>
                                <rect x="14" y="3" width="7" height="7"></rect>
                                <rect x="14" y="14" width="7" height="7"></rect>
                                <rect x="3" y="14" width="7" height="7"></rect>
                            </svg>
                            КАТАЛОГ
                        </a>
                    </li>

                    <!-- Главная -->
                    <li class="sidebar-menu__item">
                        <a href="index.html" class="sidebar-menu__link">
                            <svg
                                width="20"
                                height="20"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                            >
                                <path
                                    d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"
                                ></path>
                                <polyline
                                    points="9 22 9 12 15 12 15 22"
                                ></polyline>
                            </svg>
                            Главная
                        </a>
                    </li>

                    <!-- Оплата -->
                    <li class="sidebar-menu__item">
                        <a href="payment.html" class="sidebar-menu__link">
                            <svg
                                width="20"
                                height="20"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                            >
                                <rect
                                    x="1"
                                    y="4"
                                    width="22"
                                    height="16"
                                    rx="2"
                                    ry="2"
                                ></rect>
                                <line x1="1" y1="10" x2="23" y2="10"></line>
                            </svg>
                            Оплата
                        </a>
                    </li>

                    <!-- Доставка -->
                    <li class="sidebar-menu__item">
                        <a href="delivery.html" class="sidebar-menu__link">
                            <svg
                                width="20"
                                height="20"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                            >
                                <rect x="1" y="3" width="15" height="13"></rect>
                                <polygon
                                    points="16 8 20 8 23 11 23 16 16 16 16 8"
                                ></polygon>
                                <circle cx="5.5" cy="18.5" r="2.5"></circle>
                                <circle cx="18.5" cy="18.5" r="2.5"></circle>
                            </svg>
                            Доставка
                        </a>
                    </li>

                    <!-- Гарантия -->
                    <li class="sidebar-menu__item">
                        <a href="warranty.html" class="sidebar-menu__link">
                            <svg
                                width="20"
                                height="20"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                            >
                                <path
                                    d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"
                                ></path>
                            </svg>
                            Гарантия
                        </a>
                    </li>

                    <!-- Контакты -->
                    <li class="sidebar-menu__item">
                        <a href="contacts.html" class="sidebar-menu__link">
                            <svg
                                width="20"
                                height="20"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                            >
                                <path
                                    d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
                                ></path>
                            </svg>
                            Контакты
                        </a>
                    </li>

                    <!-- Медиа -->
                    <li class="sidebar-menu__item">
                        <a href="media.html" class="sidebar-menu__link">
                            <svg
                                width="20"
                                height="20"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                            >
                                <rect
                                    x="2"
                                    y="2"
                                    width="20"
                                    height="20"
                                    rx="2.18"
                                    ry="2.18"
                                ></rect>
                                <line x1="7" y1="2" x2="7" y2="22"></line>
                                <line x1="17" y1="2" x2="17" y2="22"></line>
                                <line x1="2" y1="12" x2="22" y2="12"></line>
                                <line x1="2" y1="7" x2="7" y2="7"></line>
                                <line x1="2" y1="17" x2="7" y2="17"></line>
                                <line x1="17" y1="17" x2="22" y2="17"></line>
                                <line x1="17" y1="7" x2="22" y2="7"></line>
                            </svg>
                            Медиа
                        </a>
                    </li>
                </ul>
            </nav>

            <!-- Селектор города внизу -->
            <div class="sidebar-city-selector">
                <button
                    class="sidebar-city-selector__btn"
                    onclick="toggleSidebarCitySelector()"
                >
                    <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <path
                            d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"
                        />
                        <circle cx="12" cy="10" r="3" />
                    </svg>
                    <span id="sidebarSelectedCity">Белгород</span>
                    <svg
                        width="12"
                        height="12"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <polyline points="6 9 12 15 18 9" />
                    </svg>
                </button>
                <div
                    class="sidebar-city-selector__dropdown"
                    id="sidebarCityDropdown"
                >
                    <div class="sidebar-city-selector__title">
                        Выберите ваш город:
                    </div>
                    <ul class="sidebar-city-selector__list">
                        <li onclick="selectSidebarCity('Белгород')">
                            Белгород
                        </li>
                        <li onclick="selectSidebarCity('Курск')">Курск</li>
                        <li onclick="selectSidebarCity('Воронеж')">Воронеж</li>
                        <li onclick="selectSidebarCity('Орёл')">Орёл</li>
                        <li onclick="selectSidebarCity('Тула')">Тула</li>
                        <li onclick="selectSidebarCity('Липецк')">Липецк</li>
                        <li onclick="selectSidebarCity('Брянск')">Брянск</li>
                    </ul>
                </div>
            </div>
        </aside>



        <!-- Modern Header -->
        <header class="modern-header modern-header--with-sidebar">
            <div class="modern-header__container">
                <div class="modern-header__main">
                    <!-- Left Section: City + Catalog -->
                    <div class="modern-header__left">                        <!-- City Selector -->
                        <div class="city-selector-modern">
                            <button
                                class="city-selector-modern__btn"
                                onclick="toggleCitySelector()"
                            >
                                <svg
                                    width="16"
                                    height="16"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                >
                                    <path
                                        d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"
                                    />
                                    <circle cx="12" cy="10" r="3" />
                                </svg>
                                <span id="selectedCity">Белгород</span>
                                <svg
                                    width="12"
                                    height="12"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                >
                                    <polyline points="6 9 12 15 18 9" />
                                </svg>
                            </button>
                            <div
                                class="city-selector-modern__dropdown"
                                id="cityDropdown"
                            >
                                <div class="city-selector-modern__title">
                                    Выберите ваш город:
                                </div>
                                <ul class="city-selector-modern__list">
                                    <li onclick="selectCity('Белгород')">
                                        Белгород
                                    </li>
                                    <li onclick="selectCity('Курск')">Курск</li>
                                    <li onclick="selectCity('Воронеж')">
                                        Воронеж
                                    </li>
                                    <li onclick="selectCity('Орёл')">Орёл</li>
                                    <li onclick="selectCity('Тула')">Тула</li>
                                    <li onclick="selectCity('Липецк')">
                                        Липецк
                                    </li>
                                    <li onclick="selectCity('Брянск')">
                                        Брянск
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <!-- Catalog Button -->
                        <a href="catalog.html" class="catalog-btn-modern">
                            <svg
                                width="20"
                                height="20"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                            >
                                <line x1="3" y1="12" x2="21" y2="12"></line>
                                <line x1="3" y1="6" x2="21" y2="6"></line>
                                <line x1="3" y1="18" x2="21" y2="18"></line>
                            </svg>
                            КАТАЛОГ
                        </a>
                    </div>

                    <!-- Center Section: Navigation -->
                    <div class="modern-header__nav">
                        <ul class="nav-menu-modern">
                            <li><a href="index.html">ГЛАВНАЯ</a></li>
                            <li><a href="payment.html">ОПЛАТА</a></li>
                            <li><a href="delivery.html">ДОСТАВКА</a></li>
                            <li><a href="warranty.html">ГАРАНТИЯ</a></li>
                            <li><a href="contacts.html">КОНТАКТЫ</a></li>
                            <li><a href="media.html">МЕДИА</a></li>
                        </ul>
                    </div>

                    <!-- Right Section: Icons -->
                    <div class="modern-header__actions">
                        <!-- Compare -->
                        <a href="compare.html" class="action-btn">
                            <svg
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                            >
                                <line x1="8" y1="6" x2="8" y2="18" />
                                <line x1="16" y1="6" x2="16" y2="18" />
                            </svg>
                            <span class="action-btn__text">Сравнение</span>
                            <span
                                class="action-btn__badge"
                                id="compareCount"
                                style="display: none"
                                >0</span
                            >
                        </a>

                        <!-- Favorites -->
                        <a href="favorites.html" class="action-btn">
                            <svg
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                            >
                                <path
                                    d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
                                />
                            </svg>
                            <span class="action-btn__text">Избранное</span>
                            <span
                                class="action-btn__badge"
                                id="favoritesCount"
                                style="display: none"
                                >0</span
                            >
                        </a>

                        <!-- Cart -->
                        <a href="cart.html" class="action-btn action-btn--cart">
                            <svg
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="white"
                                stroke-width="2"
                            >
                                <circle cx="12" cy="12" r="11" fill="#2a9d4e" />
                                <path
                                    d="M8 9L6 11H18L16 9H8Z"
                                    stroke="white"
                                    stroke-width="1.5"
                                />
                                <path
                                    d="M6 11H18L17 17H7L6 11Z"
                                    stroke="white"
                                    stroke-width="1.5"
                                />
                            </svg>
                            <span class="action-btn__text">Корзина</span>
                            <span
                                class="action-btn__badge"
                                id="cartCount"
                                style="display: none"
                                >0</span
                            >
                        </a>

                        <!-- Auth Button -->
                        <button
                            class="action-btn action-btn--auth"
                            onclick="handleAuth()"
                        >
                            <svg
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                            >
                                <path
                                    d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"
                                />
                                <circle cx="12" cy="7" r="4" />
                            </svg>
                            <span class="action-btn__text">Войти</span>
                        </button>
                    </div>

                    <!-- Mobile Menu Toggle -->
                    <button
                        class="mobile-menu-toggle"
                        onclick="toggleMobileMenu()"
                        aria-label="Меню"
                    >
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </div>
            </div>
        </header>

        <main class="main" style="padding-top: 40px; min-height: 80vh">
            <div class="container" style="max-width: 1400px">
                <!-- Breadcrumbs -->
                <nav
                    style="margin-bottom: 24px; font-size: 14px; color: #737373"
                >
                    <a
                        href="index.html"
                        style="color: #737373; text-decoration: none"
                        >Главная</a
                    >
                    <span style="margin: 0 8px">/</span>
                    <span style="color: #171717">Сравнение товаров</span>
                </nav>

                <div
                    style="
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        margin-bottom: 32px;
                        flex-wrap: wrap;
                        gap: 16px;
                    "
                >
                    <h1
                        style="
                            font-size: 42px;
                            margin: 0;
                            color: #171717;
                            font-weight: 700;
                        "
                    >
                        Сравнение товаров
                    </h1>

                    <a
                        href="catalog.html"
                        class="btn btn--outline"
                        style="
                            text-decoration: none;
                            display: inline-flex;
                            align-items: center;
                            gap: 8px;
                        "
                    >
                        <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                        >
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                        Вернуться в каталог
                    </a>
                </div>

                <div id="compareContainer"></div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer-minimal">
            <div class="footer-minimal__container">
                <div class="footer-minimal__left">
                    <p class="footer-minimal__text">
                        © 2024 DONGFENG. Официальный дилер минитракторов.
                    </p>
                </div>
                <div class="footer-minimal__right">
                    <a href="terms.html" class="footer-minimal__link"
                        >Пользовательское соглашение</a
                    >
                    <a href="privacy.html" class="footer-minimal__link"
                        >Политика конфиденциальности</a
                    >
                </div>
            </div>
        </footer>

        <script>
            const API_URL =
                window.location.hostname === "localhost"
                    ? "http://localhost:3000"
                    : "https://dongfeng-minitraktor-production.up.railway.app";
            window.API_URL = API_URL;
        </script>
        <script src="js/app.js"></script>
        <script src="js/catalog-filters.js"></script>
        <script src="js/catalog.js"></script>
        <script src="js/cart.js"></script>
        <script src="js/vertical-menu.js"></script>
        <script src="js/modern-header.js"></script>
        <script src="js/header-icons-animation.js"></script>

        <script>
            // Render Compare Page
            async function renderComparePage() {
                const container = document.getElementById("compareContainer");
                const compare = JSON.parse(
                    localStorage.getItem("compare") || "[]",
                );

                if (compare.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 60px 20px;">
                            <h3 style="font-size: 28px; margin-bottom: 16px; color: #404040;">Нет товаров для сравнения</h3>
                            <p style="font-size: 18px; color: #737373;">Добавьте минимум 2 товара для сравнения характеристик</p>
                        </div>
                    `;
                    return;
                }

                try {
                    const response = await fetch(
                        `${window.API_URL}/api/products`,
                    );
                    const data = await response.json();

                    if (data.success && data.data) {
                        const compareProducts = data.data.filter((p) =>
                            compare.includes(p.id),
                        );

                        const html = `
                            <div class="compare-table-wrapper">
                                <table class="compare-table">
                                    <tr>
                                        <th style="width: 200px;">Фото</th>
                                        ${compareProducts.map((p) => `<td><img src="${p.image_url}" alt="${p.name}"></td>`).join("")}
                                    </tr>
                                    <tr>
                                        <th>Модель</th>
                                        ${compareProducts.map((p) => `<td><strong>${p.name}</strong></td>`).join("")}
                                    </tr>
                                    <tr>
                                        <th>Цена</th>
                                        ${compareProducts.map((p) => `<td><strong style="color: #2a9d4e; font-size: 20px;">${p.price.toLocaleString("ru-RU")} ₽</strong></td>`).join("")}
                                    </tr>
                                    <tr>
                                        <th>Мощность</th>
                                        ${compareProducts.map((p) => `<td>${p.power} л.с.</td>`).join("")}
                                    </tr>
                                    <tr>
                                        <th>Привод</th>
                                        ${compareProducts.map((p) => `<td>${p.drive}</td>`).join("")}
                                    </tr>
                                    <tr>
                                        <th>КПП</th>
                                        ${compareProducts.map((p) => `<td>${p.transmission}</td>`).join("")}
                                    </tr>
                                    <tr>
                                        <th>В наличии</th>
                                        ${compareProducts.map((p) => `<td>${p.in_stock ? '<span style="color: #22c55e;">✓ Да</span>' : '<span style="color: #ef4444;">✗ Нет</span>'}</td>`).join("")}
                                    </tr>
                                    <tr>
                                        <th>Действия</th>
                                        ${compareProducts
                                            .map(
                                                (p) => `
                                            <td>
                                                <button onclick="addToCartFromCompare(${p.id})" class="btn btn--primary" style="margin-bottom: 8px; width: 100%;">
                                                    В корзину
                                                </button>
                                                <button onclick="removeCompare(${p.id})" class="compare-remove-btn" style="width: 100%;">
                                                    Удалить
                                                </button>
                                            </td>
                                        `,
                                            )
                                            .join("")}
                                    </tr>
                                </table>
                            </div>
                        `;

                        container.innerHTML = html;
                    }
                } catch (error) {
                    console.error("Ошибка загрузки сравнения:", error);
                    container.innerHTML = `
                        <div style="text-align: center; padding: 60px 20px;">
                            <p style="color: #ef4444; font-size: 18px;">Ошибка загрузки товаров</p>
                            <button onclick="location.reload()" class="btn btn--primary" style="margin-top: 20px;">Попробовать снова</button>
                        </div>
                    `;
                }
            }

            function removeCompare(productId) {
                console.log("removeCompare called with:", productId);

                if (typeof window.toggleCompare === "function") {
                    window.toggleCompare(productId);
                    // Обновляем счетчик в header
                    if (typeof window.updateCompareCounter === "function") {
                        window.updateCompareCounter();
                    }
                    // Перерисовываем страницу
                    setTimeout(() => renderComparePage(), 100);
                } else {
                    console.error("toggleCompare function not found");
                    alert(
                        "Функция удаления не доступна. Перезагрузите страницу.",
                    );
                }
            }

            function addToCartFromCompare(productId) {
                console.log("addToCartFromCompare called with:", productId);
                if (typeof window.addToCart === "function") {
                    window.addToCart(productId);
                } else {
                    console.error("addToCart function not found");
                    alert(
                        "Функция добавления в корзину не доступна. Перезагрузите страницу.",
                    );
                }
            }

            // Вызов при загрузке страницы
            document.addEventListener("DOMContentLoaded", () => {
                console.log("DOM loaded, rendering compare page...");
                renderComparePage();
            });
        </script>
    </body>
</html>
