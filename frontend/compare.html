<!doctype html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ - DONGFENG –ú–∏–Ω–∏—Ç—Ä–∞–∫—Ç–æ—Ä–∞</title>
        <meta name="description" content="–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–∏–Ω–∏—Ç—Ä–∞–∫—Ç–æ—Ä–æ–≤ DONGFENG" />

        <link rel="stylesheet" href="css/variables.css?v=1761211422" />
        <link rel="stylesheet" href="css/reset.css?v=1761211422" />
        <link rel="stylesheet" href="css/components.css?v=1761211422" />
        <link rel="stylesheet" href="css/effects.css?v=1761211422" />
        <link rel="stylesheet" href="css/main.css?v=1761211422" />
        <link rel="stylesheet" href="css/modal.css?v=1761211422" />
        <link rel="stylesheet" href="css/header-new.css?v=1761211422" />
        <link rel="stylesheet" href="css/mobile-menu.css?v=1761211422" />
        <link rel="stylesheet" href="css/catalog-modals.css?v=1761211422" />
        <link rel="stylesheet" href="css/cart.css?v=1761211422" />
        <link rel="stylesheet" href="css/cart-header-mobile.css?v=1761211422" />
        <link rel="stylesheet" href="css/footer-minimal.css?v=1761211422" />
        <style>
            /* Mobile: Force show burger menu */
            @media (max-width: 768px) {
                .header__mobile-actions {
                    display: flex !important;
                }

                .header__mobile-actions .burger {
                    display: flex !important;
                }
            }

            /* Desktop: Hide burger menu */
            @media (min-width: 769px) {
                .header__mobile-actions .burger {
                    display: none !important;
                }
            }

            .compare-table-wrapper {
                overflow-x: auto;
                margin-top: 40px;
                background: white;
                border-radius: 12px;
                padding: 20px;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            }
            .compare-table {
                width: 100%;
                border-collapse: collapse;
                min-width: 600px;
            }
            .compare-table th,
            .compare-table td {
                padding: 16px;
                text-align: center;
                border: 1px solid #e8e8e8;
            }
            .compare-table th {
                background: #f5f5f5;
                font-weight: 600;
                color: #404040;
                text-align: left;
            }
            .compare-table td {
                font-size: 16px;
                color: #525252;
            }
            .compare-table img {
                width: 120px;
                height: 120px;
                object-fit: cover;
                border-radius: 8px;
                margin: 0 auto;
                display: block;
            }
            .compare-table strong {
                color: #171717;
                font-weight: 600;
            }
            .compare-remove-btn {
                background: #fee;
                color: #ef4444;
                border: none;
                padding: 8px 16px;
                border-radius: 6px;
                cursor: pointer;
                font-size: 14px;
                font-weight: 500;
                transition: all 0.2s;
            }
            .compare-remove-btn:hover {
                background: #ef4444;
                color: white;
            }
        </style>
    </head>
    <body>
        <!-- Header -->
        <header class="header">
            <div class="container">
                <div class="header__content">
                    <div class="header__contacts">
                        <a href="tel:+79699995668" class="phone"
                            >+7 (969) 999-56-68</a
                        >
                        <a href="cart.html" class="cart-icon">
                            üõí –ö–æ—Ä–∑–∏–Ω–∞
                            <span class="cart-count" id="cartCount">0</span>
                        </a>
                    </div>

                    <!-- Mobile Actions - ONLY ON MOBILE -->
                    <div class="header__mobile-actions">
                        <a href="favorites.html" class="header-action">
                            <svg
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                            >
                                <path
                                    d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    fill="none"
                                />
                            </svg>
                            <span
                                class="header-action__badge"
                                id="favoritesCountMobile"
                                >0</span
                            >
                        </a>
                        <a href="compare.html" class="header-action">
                            <svg
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                            >
                                <path
                                    d="M9 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H9M15 3H19C20.1046 3 21 3.89543 21 5V19C21 20.1046 20.1046 21 19 21H15M9 3V21M15 3V21"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                />
                            </svg>
                            <span
                                class="header-action__badge"
                                id="compareCountMobile"
                                >0</span
                            >
                        </a>
                        <a
                            href="cart.html"
                            class="header-action header-action--cart"
                        >
                            <svg
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                            >
                                <path
                                    d="M9 2L7 7H21L19 2H9Z"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                />
                                <path
                                    d="M7 7H21L19 17H9L7 7Z"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                />
                                <circle
                                    cx="10"
                                    cy="21"
                                    r="1"
                                    fill="currentColor"
                                />
                                <circle
                                    cx="18"
                                    cy="21"
                                    r="1"
                                    fill="currentColor"
                                />
                            </svg>
                            <span
                                class="header-action__badge"
                                id="cartCountMobile"
                                >0</span
                            >
                        </a>
                        <button
                            class="burger"
                            aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é"
                            onclick="toggleMobileMenu()"
                        >
                            <span></span>
                            <span></span>
                            <span></span>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Mobile Menu Overlay -->
        <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>
        <div class="mobile-menu" id="mobileMenu">
            <div class="mobile-menu__header">
                <a href="index.html"
                    ><img
                        src="images/logo.svg"
                        alt="DONGFENG"
                        class="mobile-menu__logo"
                /></a>
                <button
                    class="mobile-menu__close"
                    onclick="closeMobileMenu()"
                    aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é"
                >
                    √ó
                </button>
            </div>
            <nav class="mobile-menu__nav">
                <ul class="mobile-menu__list">
                    <li class="mobile-menu__item">
                        <a
                            href="catalog.html"
                            class="mobile-menu__link mobile-menu__link--catalog"
                            ><span>üöú –ö–∞—Ç–∞–ª–æ–≥ —Ç—Ä–∞–∫—Ç–æ—Ä–æ–≤</span></a
                        >
                    </li>
                    <li class="mobile-menu__item">
                        <a href="index.html" class="mobile-menu__link"
                            ><span>–ì–ª–∞–≤–Ω–∞—è</span></a
                        >
                    </li>
                    <li class="mobile-menu__item">
                        <a href="payment.html" class="mobile-menu__link"
                            ><span>–û–ø–ª–∞—Ç–∞</span></a
                        >
                    </li>
                    <li class="mobile-menu__item">
                        <a href="delivery.html" class="mobile-menu__link"
                            ><span>–î–æ—Å—Ç–∞–≤–∫–∞</span></a
                        >
                    </li>
                    <li class="mobile-menu__item">
                        <a href="warranty.html" class="mobile-menu__link"
                            ><span>–ì–∞—Ä–∞–Ω—Ç–∏—è</span></a
                        >
                    </li>
                    <li class="mobile-menu__item">
                        <a href="articles.html" class="mobile-menu__link"
                            ><span>–°—Ç–∞—Ç—å–∏</span></a
                        >
                    </li>
                    <li class="mobile-menu__item">
                        <a href="contacts.html" class="mobile-menu__link"
                            ><span>–ö–æ–Ω—Ç–∞–∫—Ç—ã</span></a
                        >
                    </li>
                    <li class="mobile-menu__item">
                        <a href="media.html" class="mobile-menu__link"
                            ><span>–ú–µ–¥–∏–∞</span></a
                        >
                    </li>
                </ul>
            </nav>
            <div class="mobile-menu__footer">
                <a href="tel:+79699995668" class="mobile-menu__phone"
                    >+7 (969) 999-56-68</a
                >
                <button
                    class="btn btn--primary"
                    style="width: 100%; margin-top: 16px"
                    onclick="openCallbackModal(); closeMobileMenu();"
                >
                    –ó–∞–∫–∞–∑–∞—Ç—å –∑–≤–æ–Ω–æ–∫
                </button>
            </div>
        </div>

        <!-- Compare Page -->
        <section class="cart-page">
            <div class="container">
                <!-- Breadcrumbs -->
                <div class="breadcrumbs">
                    <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
                    <span>/</span>
                    <span>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ</span>
                </div>

                <div class="cart-header">
                    <h1 class="section-title">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤</h1>
                    <p
                        style="
                            color: var(--color-gray-600);
                            margin-top: var(--space-md);
                        "
                    >
                        –°—Ä–∞–≤–Ω–∏—Ç–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –º–∏–Ω–∏—Ç—Ä–∞–∫—Ç–æ—Ä–æ–≤
                    </p>
                </div>

                <div id="compare-content">
                    <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ —á–µ—Ä–µ–∑ JavaScript -->
                </div>

                <div style="margin-top: var(--space-xl); text-align: center">
                    <a href="catalog.html" class="btn btn--primary">
                        –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥
                    </a>
                </div>
            </div>
        </section>

        <!-- Minimal Footer -->
        <footer class="footer-minimal">
            <div class="container">
                <p>&copy; 2025 DONGFENG –ú–∏–Ω–∏—Ç—Ä–∞–∫—Ç–æ—Ä–∞. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
                <div class="footer-minimal__links">
                    <a href="/privacy.html">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
                    <a href="/terms.html">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</a>
                </div>
            </div>
        </footer>

        <script src="js/config.js"></script>
        <script src="js/global-cart.js"></script>
        <script src="js/mobile-menu.js"></script>
        <script>
            // Render compare page on load
            document.addEventListener("DOMContentLoaded", async () => {
                await renderComparePage();
            });

            async function renderComparePage() {
                const container = document.getElementById("compare-content");
                const compare = JSON.parse(
                    localStorage.getItem("compare") || "[]",
                );

                if (compare.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state" style="padding: 80px 20px; text-align: center;">
                            <svg width="120" height="120" viewBox="0 0 24 24" fill="none" style="margin: 0 auto 30px; color: #d4d4d4;">
                                <path d="M9 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H9M15 3H19C20.1046 3 21 3.89543 21 5V19C21 20.1046 20.1046 21 19 21H15M9 3V21M15 3V21" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <h3 style="font-size: 28px; margin-bottom: 16px; color: #404040;">–ù–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è</h3>
                            <p style="font-size: 18px; color: #737373; margin-bottom: 40px;">–î–æ–±–∞–≤—å—Ç–µ –º–∏–Ω–∏–º—É–º 2 —Ç–æ–≤–∞—Ä–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫</p>
                            <a href="catalog.html" class="btn btn--primary">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</a>
                        </div>
                    `;
                    return;
                }

                try {
                    const response = await fetch(
                        `${window.API_URL}/api/products`,
                    );
                    const data = await response.json();

                    if (data.success && data.data) {
                        const compareProducts = data.data.filter((p) =>
                            compare.includes(p.id),
                        );

                        const html = `
                            <div class="compare-table-wrapper">
                                <table class="compare-table">
                                    <tr>
                                        <th style="width: 200px;">–§–æ—Ç–æ</th>
                                        ${compareProducts.map((p) => `<td><img src="${p.image_url}" alt="${p.name}"></td>`).join("")}
                                    </tr>
                                    <tr>
                                        <th>–ú–æ–¥–µ–ª—å</th>
                                        ${compareProducts.map((p) => `<td><strong>${p.name}</strong></td>`).join("")}
                                    </tr>
                                    <tr>
                                        <th>–¶–µ–Ω–∞</th>
                                        ${compareProducts.map((p) => `<td><strong style="color: #2a9d4e; font-size: 20px;">${p.price.toLocaleString("ru-RU")} ‚ÇΩ</strong></td>`).join("")}
                                    </tr>
                                    <tr>
                                        <th>–ú–æ—â–Ω–æ—Å—Ç—å</th>
                                        ${compareProducts.map((p) => `<td>${p.power} –ª.—Å.</td>`).join("")}
                                    </tr>
                                    <tr>
                                        <th>–ü—Ä–∏–≤–æ–¥</th>
                                        ${compareProducts.map((p) => `<td>${p.drive}</td>`).join("")}
                                    </tr>
                                    <tr>
                                        <th>–ö–ü–ü</th>
                                        ${compareProducts.map((p) => `<td>${p.transmission}</td>`).join("")}
                                    </tr>
                                    <tr>
                                        <th>–í –Ω–∞–ª–∏—á–∏–∏</th>
                                        ${compareProducts.map((p) => `<td>${p.in_stock ? '<span style="color: #22c55e;">‚úì –î–∞</span>' : '<span style="color: #ef4444;">‚úó –ù–µ—Ç</span>'}</td>`).join("")}
                                    </tr>
                                    <tr>
                                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                        ${compareProducts
                                            .map(
                                                (p) => `
                                            <td>
                                                <button onclick="window.addToCart(${p.id})" class="btn btn--primary" style="margin-bottom: 8px; width: 100%;">
                                                    –í –∫–æ—Ä–∑–∏–Ω—É
                                                </button>
                                                <button onclick="removeCompare(${p.id})" class="compare-remove-btn" style="width: 100%;">
                                                    –£–¥–∞–ª–∏—Ç—å
                                                </button>
                                            </td>
                                        `,
                                            )
                                            .join("")}
                                    </tr>
                                </table>
                            </div>
                        `;

                        container.innerHTML = html;
                    }
                } catch (error) {
                    console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:", error);
                    container.innerHTML = `
                        <div style="text-align: center; padding: 60px 20px;">
                            <p style="color: #ef4444; font-size: 18px;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤</p>
                            <button onclick="location.reload()" class="btn btn--primary" style="margin-top: 20px;">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
                        </div>
                    `;
                }
            }

            function removeCompare(productId) {
                window.toggleCompare(productId);
                renderComparePage();
            }
        </script>
    </body>
</html>
