-- –ú–∏–≥—Ä–∞—Ü–∏—è: –†–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∑–∞–ø—á–∞—Å—Ç–µ–π
-- –£–±–∏—Ä–∞–µ–º –æ–±—â—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–ó–∞–ø—á–∞—Å—Ç–∏" –∏ —Å–æ–∑–¥–∞—ë–º 18 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
-- –î–∞—Ç–∞: 2025-11-18

-- ===================================================================
-- –®–ê–ì 1: –°–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–ø—á–∞—Å—Ç–µ–π
-- ===================================================================

-- –°–æ–∑–¥–∞—ë–º —Ç–∞–±–ª–∏—Ü—É parts_categories (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
CREATE TABLE IF NOT EXISTS parts_categories (
  id SERIAL PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  slug VARCHAR(255) NOT NULL UNIQUE,
  description TEXT,
  product_count INTEGER DEFAULT 0,
  icon VARCHAR(50),
  display_order INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- –û—á–∏—â–∞–µ–º —Ç–∞–±–ª–∏—Ü—É –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π
TRUNCATE TABLE parts_categories RESTART IDENTITY CASCADE;

-- –í—Å—Ç–∞–≤–ª—è–µ–º 18 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∑–∞–ø—á–∞—Å—Ç–µ–π (–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏)
INSERT INTO parts_categories (id, name, slug, description, product_count, icon, display_order) VALUES
(1, '–ù–∞–≤–µ—Å–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ', 'navesnoe-oborudovanie', '–ù–∞–≤–µ—Å–∫–∞, –ø—Ä–∏—Ü–µ–ø—ã, –ø–ª—É–≥–∏, –∫—É–ª—å—Ç–∏–≤–∞—Ç–æ—Ä—ã, –ö–£–ù', 563, 'üöú', 1),
(2, '–î–≤–∏–≥–∞—Ç–µ–ª—å', 'dvigatel', '–ó–∞–ø—á–∞—Å—Ç–∏ –¥–ª—è –¥–≤–∏–≥–∞—Ç–µ–ª—è: –ø–æ—Ä—à–Ω–∏, –∫–æ–ª—å—Ü–∞, –ø—Ä–æ–∫–ª–∞–¥–∫–∏, —Ñ–∏–ª—å—Ç—Ä—ã', 561, '‚öôÔ∏è', 2),
(3, '–ü—Ä–æ—á–µ–µ', 'prochee', '–ü—Ä–æ—á–∏–µ –∑–∞–ø—á–∞—Å—Ç–∏ –∏ –∫–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏–µ', 437, 'üì¶', 18),
(4, '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è', 'standartnye-izdeliya', '–ú–µ—Ç–∏–∑—ã, –∫—Ä–µ–ø—ë–∂, –±–æ–ª—Ç—ã, –≥–∞–π–∫–∏, —à–∞–π–±—ã', 335, 'üî©', 17),
(5, '–¢—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è', 'transmissiya', '–ö–ü–ü, —Å—Ü–µ–ø–ª–µ–Ω–∏–µ, –≤–∞–ª—ã, —à–µ—Å—Ç–µ—Ä–Ω–∏, –ø–æ–¥—à–∏–ø–Ω–∏–∫–∏', 233, '‚ö°', 3),
(6, '–ì–∏–¥—Ä–∞–≤–ª–∏–∫–∞', 'gidravlika', '–ì–∏–¥—Ä–∞–≤–ª–∏—á–µ—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã, –Ω–∞—Å–æ—Å—ã, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª–∏, —à–ª–∞–Ω–≥–∏ –†–í–î', 198, 'üíß', 4),
(7, '–ö–∞—Ä–¥–∞–Ω–Ω—ã–µ –≤–∞–ª—ã', 'kardannye-valy', '–ö–∞—Ä–¥–∞–Ω–Ω—ã–µ –≤–∞–ª—ã, –∫—Ä–µ—Å—Ç–æ–≤–∏–Ω—ã, –º—É—Ñ—Ç—ã', 112, 'üîó', 5),
(8, '–ü–µ—Ä–µ–¥–Ω–∏–π –º–æ—Å—Ç', 'peredniy-most', '–ü–µ—Ä–µ–¥–Ω—è—è –æ—Å—å, —Å—Ç—É–ø–∏—Ü—ã, –ø–æ–¥—à–∏–ø–Ω–∏–∫–∏, –ø–æ–≤–æ—Ä–æ—Ç–Ω—ã–µ –∫—É–ª–∞–∫–∏', 71, 'üõû', 6),
(9, '–§–∏–ª—å—Ç—Ä—ã', 'filtry', '–ú–∞—Å–ª—è–Ω—ã–µ, –≤–æ–∑–¥—É—à–Ω—ã–µ, —Ç–æ–ø–ª–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã', 69, 'üîç', 7),
(10, '–≠–ª–µ–∫—Ç—Ä–æ–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ', 'elektrooborudovanie', '–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã, —Å—Ç–∞—Ä—Ç–µ—Ä—ã, –ø—Ä–æ–≤–æ–¥–∫–∞, –¥–∞—Ç—á–∏–∫–∏, —Ñ–∞—Ä—ã', 64, 'üí°', 8),
(11, '–†—É–ª–µ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ', 'rulevoe-upravlenie', '–†—É–ª–µ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∑–º, —Ä—É–ª–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞, –Ω–∞–∫–æ–Ω–µ—á–Ω–∏–∫–∏ —Ç—è–≥', 55, 'üéØ', 9),
(12, '–¢–æ—Ä–º–æ–∑–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞', 'tormoznaya-sistema', '–¢–æ—Ä–º–æ–∑–Ω—ã–µ –∫–æ–ª–æ–¥–∫–∏, –¥–∏—Å–∫–∏, —Ü–∏–ª–∏–Ω–¥—Ä—ã, —à–ª–∞–Ω–≥–∏', 40, 'üõë', 10),
(13, '–ö–∞–±–∏–Ω–∞', 'kabina', '–≠–ª–µ–º–µ–Ω—Ç—ã –∫–∞–±–∏–Ω—ã: —Å—Ç—ë–∫–ª–∞, —É–ø–ª–æ—Ç–Ω–∏—Ç–µ–ª–∏, –∑–∞–º–∫–∏, –æ–±—à–∏–≤–∫–∞', 39, 'üè†', 11),
(14, '–¢–æ–ø–ª–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞', 'toplivnaya-sistema', '–¢–æ–ø–ª–∏–≤–Ω—ã–µ –Ω–∞—Å–æ—Å—ã, —Ñ–∏–ª—å—Ç—Ä—ã, —Ñ–æ—Ä—Å—É–Ω–∫–∏, –±–∞–∫–∏', 21, '‚õΩ', 12),
(15, '–ö–∞–ø–æ—Ç –∏ –∫—Ä—ã–ª—å—è', 'kapot-i-krylya', '–ö—É–∑–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã: –∫–∞–ø–æ—Ç, –∫—Ä—ã–ª—å—è, –æ–±–ª–∏—Ü–æ–≤–∫–∞', 18, 'üöó', 13),
(16, '–ö–æ–ª–µ—Å–∞ –∏ —à–∏–Ω—ã', 'kolesa-i-shiny', '–®–∏–Ω—ã, –¥–∏—Å–∫–∏, –∫–∞–º–µ—Ä—ã –¥–ª—è –º–∏–Ω–∏—Ç—Ä–∞–∫—Ç–æ—Ä–æ–≤', 11, '‚≠ï', 14),
(17, '–†–í–î', 'rvd', '–†—É–∫–∞–≤–∞ –≤—ã—Å–æ–∫–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è, —Ñ–∏—Ç–∏–Ω–≥–∏, –±—ã—Å—Ç—Ä–æ—Å—ä—ë–º—ã', 4, 'üîß', 15),
(18, '–°–∏–¥–µ–Ω—å—è', 'sidenya', '–°–∏–¥–µ–Ω—å—è –¥–ª—è —Ç—Ä–∞–∫—Ç–æ—Ä–∞, –∞–º–æ—Ä—Ç–∏–∑–∞—Ç–æ—Ä—ã —Å–∏–¥–µ–Ω–∏–π', 2, 'ü™ë', 16);

-- ===================================================================
-- –®–ê–ì 2: –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –æ–±—â—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–ó–∞–ø—á–∞—Å—Ç–∏" –∏–∑ categories
-- ===================================================================

-- –£–¥–∞–ª—è–µ–º –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ó–∞–ø—á–∞—Å—Ç–∏" (–µ—Å–ª–∏ –æ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ products)
-- –≠—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ, —Ç–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–Ω–æ–≤–æ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ category_id

DELETE FROM categories WHERE slug = 'parts' OR slug = 'zapchasti' OR name = '–ó–∞–ø—á–∞—Å—Ç–∏';

-- ===================================================================
-- –®–ê–ì 3: –°–æ–∑–¥–∞—ë–º –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
-- ===================================================================

CREATE INDEX IF NOT EXISTS idx_parts_categories_slug ON parts_categories(slug);
CREATE INDEX IF NOT EXISTS idx_parts_categories_name ON parts_categories(name);
CREATE INDEX IF NOT EXISTS idx_parts_categories_display_order ON parts_categories(display_order);

-- ===================================================================
-- –®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
-- ===================================================================

SELECT
    id,
    name,
    slug,
    product_count,
    icon,
    display_order
FROM parts_categories
ORDER BY display_order ASC;

-- ===================================================================
-- –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ò –ö –ú–ò–ì–†–ê–¶–ò–ò
-- ===================================================================

COMMENT ON TABLE parts_categories IS '–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–ø—á–∞—Å—Ç–µ–π –¥–ª—è –º–∏–Ω–∏—Ç—Ä–∞–∫—Ç–æ—Ä–æ–≤';
COMMENT ON COLUMN parts_categories.product_count IS '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–º)';
COMMENT ON COLUMN parts_categories.display_order IS '–ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –º–µ–Ω—é (1 = –ø–µ—Ä–≤–∞—è)';
COMMENT ON COLUMN parts_categories.icon IS '–ò–∫–æ–Ω–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (emoji –∏–ª–∏ –∫–ª–∞—Å—Å)';

-- ===================================================================
-- –ò–¢–û–ì
-- ===================================================================
-- ‚úÖ –°–æ–∑–¥–∞–Ω–æ 18 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∑–∞–ø—á–∞—Å—Ç–µ–π
-- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –æ–±—â–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è "–ó–∞–ø—á–∞—Å—Ç–∏"
-- ‚úÖ –í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤: 2833
-- ===================================================================
