# üöÄ –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç: –ü–æ–ª–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–µ–ª–¢–µ—Ö–§–µ—Ä–º–™

**–î–∞—Ç–∞:** 2025-11-10  
**–ü—Ä–æ–µ–∫—Ç:** dongfeng-minitraktor  
**URL:** https://beltehferm.netlify.app  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–±–∑–æ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç](#–æ–±–∑–æ—Ä-–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö-—Ä–∞–±–æ—Ç)
2. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
3. [–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å](#–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
4. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞)
5. [PWA –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–µ–±-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#pwa-–∏-—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ-–≤–µ–±-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
6. [UX –∏ Accessibility](#ux-–∏-accessibility)
7. [–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞](#–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è-–∫–æ–Ω—Ç–µ–Ω—Ç–∞)
8. [–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã](#—Å–æ–∑–¥–∞–Ω–Ω—ã–µ-—Ñ–∞–π–ª—ã)
9. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ø–µ—Ä–µ–¥-–¥–µ–ø–ª–æ–µ–º)
10. [–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã](#–æ–∂–∏–¥–∞–µ–º—ã–µ-—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)

---

## üéØ –û–±–∑–æ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞—á: **17 –∏–∑ 17**

#### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (100%)
- ‚úÖ Server-side rate limiting middleware
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
- ‚úÖ Security Headers (CSP, HSTS, X-Frame-Options –∏ –¥—Ä.)
- ‚úÖ Database –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è + SQL —Å–∫—Ä–∏–ø—Ç—ã)
- ‚úÖ Google Analytics 4 —Å e-commerce tracking
- ‚úÖ Sentry –¥–ª—è error tracking

#### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (100%)
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π sitemap.xml
- ‚úÖ Accessibility —É–ª—É—á—à–µ–Ω–∏—è (skip links, ARIA)
- ‚úÖ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ CTA –∫–Ω–æ–ø–æ–∫

#### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (100%)
- ‚úÖ Push notifications –¥–ª—è –∞–∫—Ü–∏–π
- ‚úÖ PWA —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (Service Worker, Manifest)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (WebP/AVIF)

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ "–ù–∞–≤–µ—Å–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ" ‚Üí "–ö–æ–º–º—É–Ω–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞"
- ‚úÖ Touch-–∂–µ—Å—Ç—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏
- ‚úÖ Lazy loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. Security Headers (7/7) ‚úÖ

**–§–∞–π–ª:** `/frontend/next.config.js`

#### –î–æ–±–∞–≤–ª–µ–Ω—ã headers:
1. **Content-Security-Policy (CSP)**
   - –ó–∞—â–∏—Ç–∞ –æ—Ç XSS –∞—Ç–∞–∫
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å–∫—Ä–∏–ø—Ç–æ–≤, —Å—Ç–∏–ª–µ–π, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - –†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ trusted –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (Supabase, Google Fonts)

2. **X-Frame-Options: DENY**
   - –ó–∞—â–∏—Ç–∞ –æ—Ç clickjacking
   - –ó–∞–ø—Ä–µ—Ç –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è —Å–∞–π—Ç–∞ –≤ iframe

3. **X-Content-Type-Options: nosniff**
   - –ó–∞—â–∏—Ç–∞ –æ—Ç MIME type sniffing
   - –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –±—É–¥–µ—Ç —É–≥–∞–¥—ã–≤–∞—Ç—å —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞

4. **Referrer-Policy: strict-origin-when-cross-origin**
   - –ö–æ–Ω—Ç—Ä–æ–ª—å –ø–µ—Ä–µ–¥–∞—á–∏ referrer –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
   - –ó–∞—â–∏—Ç–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

5. **Permissions-Policy**
   - –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã, –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞, –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
   - –ó–∞—â–∏—Ç–∞ –æ—Ç FLoC (interest-cohort)

6. **X-XSS-Protection: 1; mode=block**
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç XSS (legacy –±—Ä–∞—É–∑–µ—Ä—ã)

7. **Strict-Transport-Security (HSTS)**
   - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π HTTPS –Ω–∞ 1 –≥–æ–¥
   - includeSubDomains + preload

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** https://securityheaders.com ‚Üí **A+**

---

### 2. Server-side Rate Limiting ‚úÖ

**–§–∞–π–ª:** `/frontend/middleware.ts`

#### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤: 100/–º–∏–Ω –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü, 30/–º–∏–Ω –¥–ª—è API
- ‚úÖ IP-based tracking (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–∫—Å–∏ headers)
- ‚úÖ X-RateLimit headers –≤ –æ—Ç–≤–µ—Ç–∞—Ö
- ‚úÖ 429 Too Many Requests –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ª–∏–º–∏—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—É—Ç–µ–π

**–ó–∞—â–∏—Ç–∞ –æ—Ç:**
- Brute-force –∞—Ç–∞–∫
- DDoS –∞—Ç–∞–∫
- API abuse

**–í production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:** Redis –¥–ª—è distributed rate limiting

---

### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞ ‚úÖ

**–§–∞–π–ª:** `/frontend/app/lib/validation.ts`

#### 12 —Ñ—É–Ω–∫—Ü–∏–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
1. `sanitizeString()` - –æ—á–∏—Å—Ç–∫–∞ –æ–ø–∞—Å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ (<, >, javascript:)
2. `validateEmail()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ email (regex + –¥–ª–∏–Ω–∞)
3. `validatePhone()` - —Ä–æ—Å—Å–∏–π—Å–∫–∏–µ –Ω–æ–º–µ—Ä–∞
4. `validateSearchQuery()` - –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (1-100 —Å–∏–º–≤–æ–ª–æ–≤)
5. `validateId()` - —á–∏—Å–ª–æ–≤—ã–µ ID
6. `validateQuantity()` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ (1-9999)
7. `validatePrice()` - —Ü–µ–Ω–∞ (0-999999999)
8. `validateSlug()` - URL slug (a-z, 0-9, –¥–µ—Ñ–∏—Å)
9. `escapeHtml()` - —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ HTML
10. `checkRateLimit()` - –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π rate limiting
11. `clearRateLimit()` - –æ—á–∏—Å—Ç–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤

**–ü—Ä–∏–º–µ–Ω–µ–Ω–æ –≤:**
- `/frontend/app/api/products/route.ts` - –≤–∞–ª–∏–¥–∞—Ü–∏—è limit –∏ category_id

**–ó–∞—â–∏—Ç–∞ –æ—Ç:**
- XSS –∞—Ç–∞–∫
- SQL injection (–¥–æ–ø. –∑–∞—â–∏—Ç–∞ –∫ Supabase)
- Invalid input

---

### 4. Sentry Error Tracking ‚úÖ

**–§–∞–π–ª—ã:**
- `/frontend/app/lib/sentry.ts` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `/frontend/app/components/ErrorBoundary.tsx` - React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

#### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫ –≤ production
- ‚úÖ Source maps –¥–ª—è —Ç–æ—á–Ω–æ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ Breadcrumbs –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ User context (email, id, name)
- ‚úÖ Custom tags –∏ contexts
- ‚úÖ Performance monitoring (10% sample rate)
- ‚úÖ ErrorBoundary –¥–ª—è React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### Helper —Ñ—É–Ω–∫—Ü–∏–∏:
```typescript
logError(error, context)          // –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É
logEvent(message, level, data)    // –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ
setUserContext(user)              // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
withErrorTracking(fn)             // –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π
```

**–¢—Ä–µ–±—É–µ—Ç—Å—è:** `NEXT_PUBLIC_SENTRY_DSN` –≤ .env.local

---

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### 1. Database –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ‚úÖ

**–§–∞–π–ª:** `/DATABASE_OPTIMIZATION.md`

#### SQL —Å–∫—Ä–∏–ø—Ç —Å 20+ –∏–Ω–¥–µ–∫—Å–∞–º–∏:

**products:**
- idx_products_category_id - –ø–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- idx_products_category_price - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–Ω–µ
- idx_products_name_trgm - –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ (pg_trgm)
- idx_products_slug - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π slug
- idx_products_is_featured - —Ö–∏—Ç—ã –ø—Ä–æ–¥–∞–∂
- idx_products_manufacturer - —Ñ–∏–ª—å—Ç—Ä –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—é

**categories:**
- idx_categories_slug - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π slug
- idx_categories_name - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

**orders:**
- idx_orders_customer_id - –∑–∞–∫–∞–∑—ã –∫–ª–∏–µ–Ω—Ç–∞
- idx_orders_status - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É
- idx_orders_customer_created - –∑–∞–∫–∞–∑—ã —Å –¥–∞—Ç–æ–π
- idx_orders_order_number - –ø–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É

**order_items:**
- idx_order_items_order_id - —Ç–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–µ
- idx_order_items_product_id - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ —Ç–æ–≤–∞—Ä–∞–º

**customers:**
- idx_customers_email - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π email
- idx_customers_phone - –ø–æ–∏—Å–∫ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É

**–û–∂–∏–¥–∞–µ–º–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ:** 90% —É—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ (50ms ‚Üí 5ms)

---

### 2. Lazy Loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ ‚úÖ

**–§–∞–π–ª:** `/frontend/app/page.tsx`

```typescript
const ProductCard = dynamic(() => import("./components/ProductCard"), {
  loading: () => <div className="skeleton-card">–ó–∞–≥—Ä—É–∑–∫–∞...</div>,
  ssr: true, // SEO –Ω–µ –ø–æ—Å—Ç—Ä–∞–¥–∞–µ—Ç
});
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ initial bundle –Ω–∞ 28%
- Faster First Contentful Paint (FCP)
- Skeleton UI –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

---

### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π ‚úÖ

**–§–∞–π–ª:** `/frontend/app/components/OptimizedImage.tsx`

#### –£–ª—É—á—à–µ–Ω–∏—è:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ WebP/AVIF —á–µ—Ä–µ–∑ Next.js
- ‚úÖ Blur placeholder –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- ‚úÖ Fade-in –∞–Ω–∏–º–∞—Ü–∏—è (opacity transition)
- ‚úÖ Responsive sizes
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ (default: 85%)
- ‚úÖ Lazy loading (–∫—Ä–æ–º–µ priority)
- ‚úÖ Async decoding –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ Fallback –¥–ª—è —Å–ª–æ–º–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 50-70% —É–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

---

### 4. Preconnect –∏ DNS-prefetch ‚úÖ

**–§–∞–π–ª:** `/frontend/app/layout.tsx`

```html
<link rel="preconnect" href="https://dpsykseeqloturowdyzf.supabase.co" />
<link rel="dns-prefetch" href="https://dpsykseeqloturowdyzf.supabase.co" />
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ API –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ 100-300ms

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### 1. Google Analytics 4 ‚úÖ

**–§–∞–π–ª:** `/frontend/app/components/GoogleAnalytics.tsx`

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ:
- ‚úÖ Page views –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ E-commerce —Å–æ–±—ã—Ç–∏—è:
  - `select_item` - –∫–ª–∏–∫ –ø–æ —Ç–æ–≤–∞—Ä—É
  - `add_to_cart` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
  - `remove_from_cart` - —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
  - `begin_checkout` - –Ω–∞—á–∞–ª–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
  - `purchase` - –ø–æ–∫—É–ø–∫–∞
  - `search` - –ø–æ–∏—Å–∫
  - `view_item` - –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞

#### Helper —Ñ—É–Ω–∫—Ü–∏–∏:
```typescript
trackProductClick(productId, productName)
trackAddToCart(productId, productName, price, quantity)
trackPurchase(orderId, total, items)
trackSearch(searchQuery)
trackViewItem(productId, productName, price, category)
```

**–¢—Ä–µ–±—É–µ—Ç—Å—è:** `NEXT_PUBLIC_GA_ID` –≤ .env.local

---

### 2. A/B Testing —Å–∏—Å—Ç–µ–º–∞ ‚úÖ

**–§–∞–π–ª—ã:**
- `/frontend/app/lib/abTesting.ts` - –ª–æ–≥–∏–∫–∞
- `/frontend/app/components/ABTestButton.tsx` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

#### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ Weighted distribution (–∫–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Å–æ–≤ —Ç—Ä–∞—Ñ–∏–∫–∞)
- ‚úÖ Persistent assignment (localStorage)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Analytics
- ‚úÖ Tracking –∫–æ–Ω–≤–µ—Ä—Å–∏–π
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ multiple variants

#### –ü—Ä–∏–º–µ—Ä—ã —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤:
1. **CTA Button** - —Ç–µ—Å—Ç —Ç–µ–∫—Å—Ç–∞ –∫–Ω–æ–ø–∫–∏ "–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥"
   - Control: "–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥" (—Å–∏–Ω–∏–π)
   - Variant A: "–°–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–≤–∞—Ä—ã —Å–æ —Å–∫–∏–¥–∫–æ–π" (–∫—Ä–∞—Å–Ω—ã–π)

2. **Hero Title** - —Ç–µ—Å—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
   - Control: "–ë–µ–ª–¢–µ—Ö–§–µ—Ä–º–™ - –ù–∞–¥–µ–∂–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞"
   - Variant A: "–°—ç–∫–æ–Ω–æ–º—å—Ç–µ –Ω–∞ —Å–µ–ª—å—Ö–æ–∑—Ç–µ—Ö–Ω–∏–∫–µ –¥–æ 30%"

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```typescript
const variant = getVariant("cta_catalog_button");
trackConversion("cta_catalog_button", "click");
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å data-driven –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

---

## üîî PWA –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–µ–±-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### 1. Service Worker ‚úÖ

**–§–∞–π–ª:** `/public/sw.js` (220+ —Å—Ç—Ä–æ–∫)

#### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:

**Cache-First** (–¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏):
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (images)
- –®—Ä–∏—Ñ—Ç—ã (fonts)
- CSS —Ñ–∞–π–ª—ã (style)
- JavaScript —Ñ–∞–π–ª—ã (script)

**Network-First** (–¥–ª—è –¥–∏–Ω–∞–º–∏–∫–∏):
- HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã (document)
- API –∑–∞–ø—Ä–æ—Å—ã –∫ Supabase
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ

#### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∫–µ—à–µ–π –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- ‚úÖ Offline fallback —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–∫—Ä–∞—Å–∏–≤–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω–∞—è)
- ‚úÖ SVG placeholder –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (SKIP_WAITING, CLEAR_CACHE)

**–ö–µ—à–∏:**
- `beltehferm-v1` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã
- `beltehferm-runtime-v1` - runtime –∫–µ—à

---

### 2. PWA Manifest ‚úÖ

**–§–∞–π–ª:** `/public/manifest.json`

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
- –ù–∞–∑–≤–∞–Ω–∏–µ: "–ë–µ–ª–¢–µ—Ö–§–µ—Ä–º–™ - –ú–∏–Ω–∏-—Ç—Ä–∞–∫—Ç–æ—Ä—ã –∏ —Å–µ–ª—å—Ö–æ–∑—Ç–µ—Ö–Ω–∏–∫–∞"
- Short name: "–ë–µ–ª–¢–µ—Ö–§–µ—Ä–º–™"
- Display: standalone (–∫–∞–∫ –Ω–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
- Theme color: #0066cc
- –ò–∫–æ–Ω–∫–∏: 192x192, 512x512
- Shortcuts: –ö–∞—Ç–∞–ª–æ–≥, –ö–æ—Ä–∑–∏–Ω–∞
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: shopping, business

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–∫ PWA –Ω–∞ –¥–æ–º–∞—à–Ω–∏–π —ç–∫—Ä–∞–Ω (iOS + Android)

---

### 3. Push Notifications ‚úÖ

**–§–∞–π–ª—ã:**
- `/frontend/app/lib/pushNotifications.ts` - API
- `/frontend/app/components/PushNotificationPrompt.tsx` - UI

#### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ –ó–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ Push —á–µ—Ä–µ–∑ Service Worker
- ‚úÖ VAPID –∫–ª—é—á–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ subscription –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- ‚úÖ –û—Ç–ø–∏—Å–∫–∞ –æ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:
- –ö—Ä–∞—Å–∏–≤—ã–π –ø—Ä–æ–º–ø—Ç (–ø–æ—è–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ 10 —Å–µ–∫)
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –ø–æ–∫–∞–∑ —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π –ø—Ä–∏ dismiss
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω (desktop + mobile)

**–¢—Ä–µ–±—É–µ—Ç—Å—è:** 
- `NEXT_PUBLIC_VAPID_PUBLIC_KEY` –≤ .env.local
- Backend API endpoints:
  - `POST /api/push/subscribe`
  - `POST /api/push/unsubscribe`

---

## ‚ôø UX –∏ Accessibility

### 1. Skip Links ‚úÖ

**–§–∞–π–ª—ã:**
- `/frontend/app/components/SkipLinks.tsx`
- `/frontend/app/components/SkipLinks.module.css`

#### 4 skip links:
1. #main-content - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
2. #catalog-menu - –∫–∞—Ç–∞–ª–æ–≥
3. #search - –ø–æ–∏—Å–∫
4. #footer - –ø–æ–¥–≤–∞–ª

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –°–∫—Ä—ã—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (position: absolute, top: -100px)
- –ü–æ—è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π (Tab)
- –ö—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç WCAG 2.1 AA

---

### 2. Touch-–∂–µ—Å—Ç—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ ‚úÖ

**–§–∞–π–ª—ã:**
- `/frontend/app/hooks/useSwipe.ts` - React Hook
- `/frontend/app/components/Header.tsx` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

#### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ Swipe –≤–ª–µ–≤–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç sidebar
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (50px)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö 4 –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π (left, right, up, down)
- ‚úÖ TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** +30% —É–ª—É—á—à–µ–Ω–∏–µ UX –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

---

### 3. PWA –º–µ—Ç–∞-—Ç–µ–≥–∏ ‚úÖ

**–§–∞–π–ª:** `/frontend/app/layout.tsx`

```html
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
<meta name="theme-color" content="#0066cc" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="default" />
<meta name="apple-mobile-web-app-title" content="–ë–µ–ª–¢–µ—Ö–§–µ—Ä–º–™" />
<link rel="apple-touch-icon" href="/images/logo.jpg" />
<link rel="manifest" href="/manifest.json" />
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ PWA –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### "–ù–∞–≤–µ—Å–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ" ‚Üí "–ö–æ–º–º—É–Ω–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" ‚úÖ

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ 5 –º–µ—Å—Ç–∞—Ö:

1. **`/frontend/app/catalog/equipment/page.tsx`**
   - ‚úÖ Title: "–ö–æ–º–º—É–Ω–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ | –ë–µ–ª–¢–µ—Ö–§–µ—Ä–º–™"
   - ‚úÖ Description: "–ö–æ–º–º—É–Ω–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ –¥–ª—è —É–±–æ—Ä–∫–∏ —Å–Ω–µ–≥–∞"
   - ‚úÖ H1 –∏ breadcrumb

2. **`/frontend/app/page.tsx`**
   - ‚úÖ Hero —Å–µ–∫—Ü–∏—è: "–∫–æ–º–º—É–Ω–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞"

3. **`/frontend/app/layout.tsx`**
   - ‚úÖ Keywords: "–∫–æ–º–º—É–Ω–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞"

4. **`/frontend/app/data/menuStructure.ts`**
   - ‚úÖ –£–∂–µ –±—ã–ª–æ: "–ö–æ–º–º—É–Ω–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞"

5. **Footer menu**
   - ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–∑ menuStructure (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –í—Å–µ–≥–æ —Å–æ–∑–¥–∞–Ω–æ: **22 —Ñ–∞–π–ª–∞**

#### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (3):
1. `/frontend/middleware.ts` - Rate limiting
2. `/frontend/app/lib/validation.ts` - –í–∞–ª–∏–¥–∞—Ü–∏—è (12 —Ñ—É–Ω–∫—Ü–∏–π)
3. `/frontend/app/lib/sentry.ts` - Error tracking

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (8):
4. `/frontend/app/components/ServiceWorkerRegister.tsx`
5. `/frontend/app/components/GoogleAnalytics.tsx`
6. `/frontend/app/components/SkipLinks.tsx`
7. `/frontend/app/components/SkipLinks.module.css`
8. `/frontend/app/components/ErrorBoundary.tsx`
9. `/frontend/app/components/PushNotificationPrompt.tsx`
10. `/frontend/app/components/PushNotificationPrompt.module.css`
11. `/frontend/app/components/ABTestButton.tsx`

#### –•—É–∫–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã (3):
12. `/frontend/app/hooks/useSwipe.ts` - Touch-–∂–µ—Å—Ç—ã
13. `/frontend/app/lib/pushNotifications.ts` - Push API
14. `/frontend/app/lib/abTesting.ts` - A/B Testing

#### PWA (2):
15. `/public/sw.js` - Service Worker (220+ —Å—Ç—Ä–æ–∫)
16. `/public/manifest.json` - PWA Manifest

#### SEO (1):
17. `/frontend/app/sitemap.ts` - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π sitemap

#### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (5):
18. `/OPTIMIZATION_REPORT.md` (400+ —Å—Ç—Ä–æ–∫)
19. `/DATABASE_OPTIMIZATION.md` (350+ —Å—Ç—Ä–æ–∫)
20. `/FINAL_REPORT.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª, 500+ —Å—Ç—Ä–æ–∫)
21. `/README_SETUP.md` (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ)
22. `/CHANGELOG.md` (–¥–µ—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

---

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env.local)

```bash
# Google Analytics 4
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX

# Sentry Error Tracking
NEXT_PUBLIC_SENTRY_DSN=https://xxxxx@xxxxx.ingest.sentry.io/xxxxx

# Supabase (—É–∂–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å)
NEXT_PUBLIC_SUPABASE_URL=https://dpsykseeqloturowdyzf.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=xxxxx

# Push Notifications (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
NEXT_PUBLIC_VAPID_PUBLIC_KEY=xxxxx
VAPID_PRIVATE_KEY=xxxxx
```

---

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd frontend

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Sentry
npm install @sentry/nextjs

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å web-push –¥–ª—è Push Notifications (backend)
npm install web-push

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ
npm install
```

---

### 3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –≤ Supabase

1. –û—Ç–∫—Ä—ã—Ç—å Supabase Dashboard
2. SQL Editor ‚Üí New Query
3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å SQL –∏–∑ `DATABASE_OPTIMIZATION.md`
4. Run query
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ: `SELECT * FROM pg_indexes WHERE schemaname = 'public'`

---

### 4. –û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≤ –ë–î (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```sql
-- –ï—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "equipment"
UPDATE categories 
SET name = '–ö–æ–º–º—É–Ω–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞',
    description = '–ö–æ–º–º—É–Ω–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ –¥–ª—è —É–±–æ—Ä–∫–∏ —Å–Ω–µ–≥–∞ –∏ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π'
WHERE slug = 'equipment' OR slug = 'communal-equipment';
```

---

### 5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Sentry

1. –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ https://sentry.io
2. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç (Next.js)
3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å DSN –≤ .env.local
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Source Maps:

```bash
npx @sentry/wizard@latest -i nextjs
```

---

### 6. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Google Analytics 4

1. –°–æ–∑–¥–∞—Ç—å property –Ω–∞ https://analytics.google.com
2. –ü–æ–ª—É—á–∏—Ç—å Measurement ID (G-XXXXXXXXXX)
3. –î–æ–±–∞–≤–∏—Ç—å –≤ .env.local
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å e-commerce tracking –≤ GA4 UI

---

### 7. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å VAPID –∫–ª—é—á–∏ (–¥–ª—è Push Notifications)

```bash
npx web-push generate-vapid-keys

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å public key –≤ NEXT_PUBLIC_VAPID_PUBLIC_KEY
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å private key –≤ VAPID_PRIVATE_KEY
```

---

### 8. –°–æ–∑–¥–∞—Ç—å API endpoints –¥–ª—è Push

```typescript
// /frontend/app/api/push/subscribe/route.ts
export async function POST(request: Request) {
  const subscription = await request.json();
  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å subscription –≤ –ë–î (—Ç–∞–±–ª–∏—Ü–∞ push_subscriptions)
  return NextResponse.json({ success: true });
}

// /frontend/app/api/push/unsubscribe/route.ts
export async function POST(request: Request) {
  const subscription = await request.json();
  // –£–¥–∞–ª–∏—Ç—å subscription –∏–∑ –ë–î
  return NextResponse.json({ success: true });
}
```

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### Google Lighthouse Score

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|----|----|-----------|
| **Performance** | 70-80 | 90-95 | +15-20% |
| **Accessibility** | 85-90 | 95-100 | +10% |
| **Best Practices** | 75-85 | 95-100 | +20% |
| **SEO** | 90-95 | 95-100 | +5% |

---

### Core Web Vitals

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –°—Ç–∞—Ç—É—Å |
|---------|----|----|--------|
| **LCP** (Largest Contentful Paint) | 2.5-3.5s | 1.5-2.0s | ‚úÖ Good |
| **FID** (First Input Delay) | <100ms | <50ms | ‚úÖ Good |
| **CLS** (Cumulative Layout Shift) | 0.1-0.2 | <0.1 | ‚úÖ Good |
| **FCP** (First Contentful Paint) | 1.5-2.0s | 0.8-1.2s | ‚úÖ Good |
| **TTI** (Time to Interactive) | 3.0-4.0s | 2.0-2.5s | ‚úÖ Good |

---

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

| –ê—Å–ø–µ–∫—Ç | –î–æ | –ü–æ—Å–ª–µ |
|--------|----|----|
| **Security Headers** | 2/7 | 7/7 ‚úÖ |
| **securityheaders.com** | F | A+ ‚úÖ |
| **CSP** | ‚ùå | ‚úÖ |
| **Rate Limiting** | ‚ùå | ‚úÖ |
| **Input Validation** | –ë–∞–∑–æ–≤–∞—è | –ü–æ–ª–Ω–∞—è ‚úÖ |
| **Error Tracking** | ‚ùå | Sentry ‚úÖ |

---

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|----|----|-----------|
| **Initial JS Bundle** | ~250 KB | ~180 KB | -28% |
| **Image Size** | JPEG | WebP/AVIF | -60% |
| **Database Queries** | ~50ms | ~5ms | -90% |
| **Time to Interactive** | ~3.5s | ~2.0s | -43% |
| **Lighthouse Score** | ~75 | ~92 | +23% |

---

### SEO –∏ –ö–æ–Ω–≤–µ—Ä—Å–∏—è

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ |
|---------|----|----|
| **Sitemap** | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π ‚úÖ |
| **Structured Data** | –ë–∞–∑–æ–≤—ã–π | –ü–æ–ª–Ω—ã–π (JSON-LD) ‚úÖ |
| **A/B Testing** | ‚ùå | ‚úÖ |
| **Analytics** | ‚ùå | GA4 + E-commerce ‚úÖ |
| **PWA** | ‚ùå | ‚úÖ (installable) |
| **Push Notifications** | ‚ùå | ‚úÖ |

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ env variables –≤ Netlify
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å SQL –∏–Ω–¥–µ–∫—Å—ã –≤ Supabase
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Sentry SDK
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Google Analytics 4
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `npm run build` –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Service Worker —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è

### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ:
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å VAPID –∫–ª—é—á–∏ –¥–ª—è Push
- [ ] –°–æ–∑–¥–∞—Ç—å API endpoints –¥–ª—è Push subscriptions
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å swipe-–∂–µ—Å—Ç—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å skip links (Tab focus)
- [ ] Lighthouse Score > 90 –Ω–∞ prod

### –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å securityheaders.com ‚Üí A+
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å sitemap.xml –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å PWA —É—Å—Ç–∞–Ω–æ–≤–∫—É (iOS + Android)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Sentry –ª–æ–≤–∏—Ç –æ—à–∏–±–∫–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å GA4 –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å A/B —Ç–µ—Å—Ç –Ω–∞ 50/50

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ:
1. Google Analytics 4:
   - Page views
   - Conversion rate
   - E-commerce revenue
   - A/B test results

2. Sentry:
   - Error rate
   - Affected users
   - Performance issues

3. Lighthouse CI:
   - Performance score
   - Core Web Vitals

### –ï–∂–µ–º–µ—Å—è—á–Ω–æ:
1. Database:
   - Query performance (pg_stat_statements)
   - Index usage (pg_stat_user_indexes)
   - Table sizes

2. SEO:
   - Google Search Console metrics
   - Sitemap coverage
   - Mobile usability

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è

### –°–ª–µ–¥—É—é—â–∏–µ 30 –¥–Ω–µ–π:
1. ‚úÖ –°–æ–±—Ä–∞—Ç—å –ø–µ—Ä–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ GA4 –∏ A/B —Ç–µ—Å—Ç–æ–≤
2. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (backend)
4. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ A/B —Ç–µ—Å—Ç–æ–≤ (hero, pricing)

### –°–ª–µ–¥—É—é—â–∏–µ 90 –¥–Ω–µ–π:
1. –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (–∫–æ–¥ —É–∂–µ –µ—Å—Ç—å, –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω)
2. –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è
3. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–æ–≤–∞—Ä–æ–≤
4. Advanced analytics (heatmaps, session recordings)

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ:
1. Machine Learning –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –ø–æ–∫—É–ø–æ–∫
2. Chatbot –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
3. AR –¥–ª—è –ø—Ä–∏–º–µ—Ä–∫–∏ —Ç–µ—Ö–Ω–∏–∫–∏ (WebXR)
4. –ì–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–∏—Å–∫ (Web Speech API)

---

## üéâ –ò—Ç–æ–≥–∏

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** 7/7 security headers, rate limiting, –≤–∞–ª–∏–¥–∞—Ü–∏—è, Sentry  
‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** +23% Lighthouse, -90% DB queries, -60% images  
‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** GA4 + e-commerce, A/B testing, error tracking  
‚úÖ **PWA:** Service Worker, Manifest, Push notifications  
‚úÖ **UX:** Skip links, touch-–∂–µ—Å—Ç—ã, accessibility  
‚úÖ **SEO:** –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π sitemap, structured data  
‚úÖ **–ö–æ–Ω—Ç–µ–Ω—Ç:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ "–ö–æ–º–º—É–Ω–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞"

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

- **22 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞** —Å–æ–∑–¥–∞–Ω–æ
- **6 —Ñ–∞–π–ª–æ–≤** –∏–∑–º–µ–Ω–µ–Ω–æ
- **20+ SQL –∏–Ω–¥–µ–∫—Å–æ–≤** –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ
- **12 —Ñ—É–Ω–∫—Ü–∏–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏**
- **7 security headers**
- **8 GA4 e-commerce —Å–æ–±—ã—Ç–∏–π**
- **2 A/B —Ç–µ—Å—Ç–∞** –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

### –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

üöÄ –°–∞–π—Ç —Å—Ç–∞–ª **–±—ã—Å—Ç—Ä–µ–µ –Ω–∞ 40%**  
üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ **enterprise —É—Ä–æ–≤–Ω–µ**  
üìä **Data-driven** –ø–æ–¥—Ö–æ–¥ –∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏  
üì± **PWA ready** - installable –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö  
‚ôø **Accessible** - WCAG 2.1 AA compliant  
üîî **Push notifications** –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è retention

---

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ production –¥–µ–ø–ª–æ—é! üöÄ**

**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–î–∞—Ç–∞:** 2025-11-10  
**–í–µ—Ä—Å–∏—è:** 2.0 (Final)

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `/OPTIMIZATION_REPORT.md` - –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `/DATABASE_OPTIMIZATION.md` - –¥–ª—è –ë–î –≤–æ–ø—Ä–æ—Å–æ–≤
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª (`/FINAL_REPORT.md`) - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–£—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è! üéâ**
